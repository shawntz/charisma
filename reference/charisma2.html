<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Re-analyze and edit saved charisma objects — charisma2 • charisma</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Raleway-0.4.10/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/Chelsea_Market-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Re-analyze and edit saved charisma objects — charisma2"><meta name="description" content="The charisma2 function allows users to step through and edit
previously saved charisma objects. This function enables rewinding
to specific merge or replacement states, applying different thresholds, or
continuing interactive editing from any saved state, ensuring full
reproducibility of the analysis."><meta property="og:description" content="The charisma2 function allows users to step through and edit
previously saved charisma objects. This function enables rewinding
to specific merge or replacement states, applying different thresholds, or
continuing interactive editing from any saved state, ensuring full
reproducibility of the analysis."><meta property="og:image" content="https://shawnschwartz.com/charisma/logo.png"><link rel="stylesheet" href="extra.css"><script async src="https://cdn.seline.com/seline.js" data-token="2162fe5e9da2b07"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">charisma</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/charisma.html">Get Started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/charisma.html">Getting Started</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/shawntz/charisma" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Re-analyze and edit saved charisma objects</h1>
      <small class="dont-index">Source: <a href="https://github.com/shawntz/charisma/blob/v1.0.0/R/charisma2.R" class="external-link"><code>R/charisma2.R</code></a></small>
      <div class="d-none name"><code>charisma2.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>charisma2</code> function allows users to step through and edit
previously saved <code>charisma</code> objects. This function enables rewinding
to specific merge or replacement states, applying different thresholds, or
continuing interactive editing from any saved state, ensuring full
reproducibility of the analysis.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">charisma2</span><span class="op">(</span></span>
<span>  <span class="va">charisma.obj</span>,</span>
<span>  interactive <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  new.threshold <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  which.state <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none"</span>, <span class="st">"merge"</span>, <span class="st">"replace"</span><span class="op">)</span>,</span>
<span>  state.index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  k.override <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-charisma-obj">charisma.obj<a class="anchor" aria-label="anchor" href="#arg-charisma-obj"></a></dt>
<dd><p>A <code>charisma</code> object to be re-analyzed. Cannot be a
<code>charisma2</code> object (attempting to run <code>charisma2</code> on a
<code>charisma2</code> object will produce an error).</p></dd>


<dt id="arg-interactive">interactive<a class="anchor" aria-label="anchor" href="#arg-interactive"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, enters interactive mode for
manual color adjustments. Default is <code>TRUE</code>.</p></dd>


<dt id="arg-new-threshold">new.threshold<a class="anchor" aria-label="anchor" href="#arg-new-threshold"></a></dt>
<dd><p>Numeric value between 0 and 1 to apply a different color
proportion threshold than the original analysis. If <code>NULL</code>, uses the
original threshold. Default is <code>NULL</code>.</p></dd>


<dt id="arg-which-state">which.state<a class="anchor" aria-label="anchor" href="#arg-which-state"></a></dt>
<dd><p>Character string specifying which state to revert to.
Options are <code>"none"</code> (most recent state), <code>"merge"</code>
(specific merge state), or <code>"replace"</code> (specific replacement state).
Default is <code>"none"</code>.</p></dd>


<dt id="arg-state-index">state.index<a class="anchor" aria-label="anchor" href="#arg-state-index"></a></dt>
<dd><p>Integer specifying which state index to revert to when
<code>which.state</code> is <code>"merge"</code> or <code>"replace"</code>. Must be provided
if <code>which.state</code> is not <code>"none"</code>. Default is <code>NULL</code>.</p></dd>


<dt id="arg-k-override">k.override<a class="anchor" aria-label="anchor" href="#arg-k-override"></a></dt>
<dd><p>Integer to force a specific number of color clusters.
Default is <code>NULL</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>charisma2</code> object (also of class <code>charisma</code>) containing
the same structure as a <code>charisma</code> object, with updated states based
on the specified reversion point and any new operations performed.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>charisma2</code> function provides powerful state management
capabilities:</p><ul><li><p><strong>State rewinding</strong>: Jump to any previous merge or replacement
state</p></li>
<li><p><strong>Re-thresholding</strong>: Apply different color proportion thresholds
without re-running the entire pipeline</p></li>
<li><p><strong>Continued editing</strong>: Resume interactive editing from saved
states</p></li>
<li><p><strong>Full provenance</strong>: All operations maintain complete history
for reproducibility</p></li>
</ul><p>Note: Interactive adjustment of merge states is disabled if replacement
states exist, as replacement operations depend on post-merge cluster indices.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Schwartz, S.T., Tsai, W.L.E., Karan, E.A., Juhn, M.S., Shultz, A.J.,
McCormack, J.E., Smith, T.B., and Alfaro, M.E. (2025). charisma: An R package
to perform reproducible color characterization of digital images for
biological studies. (In Review).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="charisma.html">charisma</a></code> for initial color classification,
<code><a href="plot.charisma.html">plot.charisma</a></code> for visualization</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load a previously saved charisma object</span></span></span>
<span class="r-in"><span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Tangara_fastuosa.RDS"</span>, package <span class="op">=</span> <span class="st">"charisma"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Examples that require objects with merge/replacement states</span></span></span>
<span class="r-in"><span><span class="co"># (These examples show the syntax but won't run with the provided test data)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Revert to a specific merge state (if merge states exist)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">obj</span><span class="op">$</span><span class="va">merge_states</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">charisma2</span><span class="op">(</span><span class="va">obj</span>, which.state <span class="op">=</span> <span class="st">"merge"</span>, state.index <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Revert to a specific replacement state (if replacement states exist)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">obj</span><span class="op">$</span><span class="va">replacement_states</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">charisma2</span><span class="op">(</span><span class="va">obj</span>, which.state <span class="op">=</span> <span class="st">"replace"</span>, state.index <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Re-enter interactive mode with original threshold</span></span></span>
<span class="r-in"><span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Tangara_fastuosa.RDS"</span>, package <span class="op">=</span> <span class="st">"charisma"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">charisma2</span><span class="op">(</span><span class="va">obj</span>, interactive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://scholar.google.com/citations?user=xII63_wAAAAJ&amp;hl=en&amp;oi=ao" class="external-link">Shawn T. Schwartz</a> and <a href="https://scholar.google.com/citations?user=c49cEeYAAAAJ&amp;hl=en&amp;oi=ao" class="external-link">Whitney L.E. Tsai</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> and ❤️. Provided without any warranty.</p>
</div>

    </footer></div>





  </body></html>

