[{"path":[]},{"path":"https://shawnschwartz.com/charisma/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://shawnschwartz.com/charisma/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Code of Conduct","text":"Examples behavior contributes positive environment community include: respectful inclusive differing viewpoints experiences Gracefully accepting constructive criticism Focusing best community Showing empathy towards community members Using welcoming inclusive language Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances Trolling, insulting/derogatory comments, personal political attacks Public private harassment Publishing othersâ€™ private information without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://shawnschwartz.com/charisma/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, ban temporarily permanently contributor behaviors deem inappropriate, threatening, offensive, harmful.","code":""},{"path":"https://shawnschwartz.com/charisma/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official project e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://shawnschwartz.com/charisma/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement shawn.t.schwartz@gmail.com. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://shawnschwartz.com/charisma/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://shawnschwartz.com/charisma/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://shawnschwartz.com/charisma/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://shawnschwartz.com/charisma/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://shawnschwartz.com/charisma/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://shawnschwartz.com/charisma/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html answers common questions code conduct, see https://www.contributor-covenant.org/faq","code":""},{"path":"https://shawnschwartz.com/charisma/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to charisma","title":"Contributing to charisma","text":"Thank interest contributing charisma! document provides guidelines instructions contributing.","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/CONTRIBUTING.html","id":"reporting-bugs","dir":"","previous_headings":"How to Contribute","what":"Reporting Bugs","title":"Contributing to charisma","text":"Use bug report template opening issue Include minimal reproducible example Provide session info sessionInfo() Check existing issues avoid duplicates","code":""},{"path":"https://shawnschwartz.com/charisma/CONTRIBUTING.html","id":"suggesting-features","dir":"","previous_headings":"How to Contribute","what":"Suggesting Features","title":"Contributing to charisma","text":"Use feature request template opening issue Clearly describe use case motivation Consider alternative approaches","code":""},{"path":"https://shawnschwartz.com/charisma/CONTRIBUTING.html","id":"code-contributions","dir":"","previous_headings":"How to Contribute","what":"Code Contributions","title":"Contributing to charisma","text":"Fork repository clone fork Create branch changes: Make changes following coding standards Write update tests new functionality Update documentation needed (roxygen comments, vignettes) Run checks locally submitting: Commit changes clear, descriptive commit messages Push fork open pull request","code":"git checkout -b your-feature-name devtools::check()"},{"path":[]},{"path":"https://shawnschwartz.com/charisma/CONTRIBUTING.html","id":"r-code-style","dir":"","previous_headings":"Coding Standards","what":"R Code Style","title":"Contributing to charisma","text":"Follow tidyverse style guide Use roxygen2 function documentation Keep lines 80 characters possible Use meaningful variable function names","code":""},{"path":"https://shawnschwartz.com/charisma/CONTRIBUTING.html","id":"documentation","dir":"","previous_headings":"Coding Standards","what":"Documentation","title":"Contributing to charisma","text":"exported functions must complete roxygen documentation Include examples documentation possible Update NEWS.md user-facing changes","code":""},{"path":"https://shawnschwartz.com/charisma/CONTRIBUTING.html","id":"testing","dir":"","previous_headings":"Coding Standards","what":"Testing","title":"Contributing to charisma","text":"Write tests new functionality using testthat Aim good test coverage Tests fast independent Run devtools::test() verify tests pass","code":""},{"path":"https://shawnschwartz.com/charisma/CONTRIBUTING.html","id":"git-workflow","dir":"","previous_headings":"Coding Standards","what":"Git Workflow","title":"Contributing to charisma","text":"Write clear, descriptive commit messages Keep commits focused single change Reference issue numbers commit messages applicable","code":""},{"path":"https://shawnschwartz.com/charisma/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"","what":"Pull Request Process","title":"Contributing to charisma","text":"Ensure code passes checks (devtools::check()) Update documentation needed Add tests new functionality Update NEWS.md brief description changes Fill pull request template completely changed changed test changes","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/CONTRIBUTING.html","id":"system-dependencies","dir":"","previous_headings":"Development Setup","what":"System Dependencies","title":"Contributing to charisma","text":"Install required system libraries: macOS (via Homebrew): Ubuntu/Debian: Fedora/RedHat:","code":"brew install udunits gdal proj geos sudo apt-get install libudunits2-dev libgdal-dev libgeos-dev libproj-dev sudo dnf install udunits2-devel gdal-devel geos-devel proj-devel"},{"path":"https://shawnschwartz.com/charisma/CONTRIBUTING.html","id":"r-dependencies","dir":"","previous_headings":"Development Setup","what":"R Dependencies","title":"Contributing to charisma","text":"Install development dependencies:","code":"devtools::install_dev_deps()"},{"path":"https://shawnschwartz.com/charisma/CONTRIBUTING.html","id":"building-documentation","dir":"","previous_headings":"Development Setup","what":"Building Documentation","title":"Contributing to charisma","text":"","code":"devtools::document()  # Update roxygen documentation devtools::build_readme()  # Rebuild README.md from README.Rmd"},{"path":"https://shawnschwartz.com/charisma/CONTRIBUTING.html","id":"questions","dir":"","previous_headings":"","what":"Questions?","title":"Contributing to charisma","text":"questions contributing, feel free : Open issue question label Check existing documentation vignettes Review existing code examples Thank contributing charisma!","code":""},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Getting Started","text":"charisma package provides standardized reproducible framework characterizing classifying discrete color classes digital images biological organisms. vignette walks basic workflow demonstrates key features package.","code":""},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"what-does-charisma-do","dir":"Articles","previous_headings":"Introduction","what":"What does charisma do?","title":"Getting Started","text":"charisma automatically determines presence absence 10 human-visible color categories images: black, blue, brown, green, grey orange, purple, red, white, yellow package uses biologically-inspired Color Look-Table (CLUT) partitions HSV color space non-overlapping regions, ensuring color maps exactly one category.","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"system-dependencies","dir":"Articles","previous_headings":"Installation","what":"System Dependencies","title":"Getting Started","text":"charisma depends spatial R packages require system-level libraries. Install first: macOS (via Homebrew): Ubuntu/Debian: Fedora/RedHat:","code":"brew install udunits gdal proj geos sudo apt-get install libudunits2-dev libgdal-dev libgeos-dev libproj-dev sudo dnf install udunits2-devel gdal-devel geos-devel proj-devel"},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"development-version-github","dir":"Articles","previous_headings":"Installation","what":"Development Version (GitHub)","title":"Getting Started","text":"","code":"# install.packages(\"remotes\") remotes::install_github(\"shawntz/charisma\")"},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"stable-version-cran","dir":"Articles","previous_headings":"Installation","what":"Stable Version (CRAN)","title":"Getting Started","text":"","code":"install.packages(\"charisma\")  # Coming soon!"},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"load-the-package","dir":"Articles","previous_headings":"","what":"Load the Package","title":"Getting Started","text":"","code":"library(charisma)"},{"path":[]},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"step-1-load-an-image","dir":"Articles","previous_headings":"Basic Workflow","what":"Step 1: Load an Image","title":"Getting Started","text":"package includes example image colorful bird (Tangara fastuosa):","code":"img_path <- system.file(   \"extdata\",   \"Tangara_fastuosa_LACM60421.png\",   package = \"charisma\" )"},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"step-2-run-charisma","dir":"Articles","previous_headings":"Basic Workflow","what":"Step 2: Run charisma","title":"Getting Started","text":"simplest analysis uses default parameters: Key parameters: threshold: Minimum proportion pixels color retained (0-1) interactive: Enable manual color merging/replacement plot: Show diagnostic plots processing pavo: Compute color pattern geometry statistics","code":"result <- charisma(   img_path,   threshold = 0.0,   interactive = FALSE,   plot = FALSE,   pavo = FALSE )"},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"step-3-visualize-results","dir":"Articles","previous_headings":"Basic Workflow","what":"Step 3: Visualize Results","title":"Getting Started","text":"creates multi-panel visualization showing: Original image Color-masked image Color proportions Color histogram","code":"plot(result)"},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"understanding-the-pipeline","dir":"Articles","previous_headings":"","what":"Understanding the Pipeline","title":"Getting Started","text":"charisma workflow consists three main stages:","code":""},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"image-preprocessing","dir":"Articles","previous_headings":"Understanding the Pipeline","what":"1. Image Preprocessing","title":"Getting Started","text":"Images pre-processed using recolorize package : Perform spatial-color binning Remove noisy pixels Create smoothed representation dominant colors","code":"# Control preprocessing with bins and cutoff parameters result <- charisma(   img_path,   bins = 4,     # Bins per RGB channel (4^3 = 64 clusters)   cutoff = 20   # Euclidean distance threshold )"},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"color-classification","dir":"Articles","previous_headings":"Understanding the Pipeline","what":"2. Color Classification","title":"Getting Started","text":"color cluster converted RGB HSV matched CLUT:","code":"# Example: Classify a single RGB color color2label(c(255, 0, 0))    # Red #> [1] \"red\" color2label(c(0, 0, 255))    # Blue #> [1] \"blue\" color2label(c(255, 255, 0))  # Yellow #> [1] \"yellow\""},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"optional-manual-curation","dir":"Articles","previous_headings":"Understanding the Pipeline","what":"3. Optional Manual Curation","title":"Getting Started","text":"interactive mode, can manually refine classifications: Interactive operations: Merge: Combine color clusters (e.g., c(2,3)) Replace: Reassign pixels one cluster another Complete operation history saved reproducibility","code":"result <- charisma(   img_path,   interactive = TRUE,   threshold = 0.0 )"},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"working-with-thresholds","dir":"Articles","previous_headings":"","what":"Working with Thresholds","title":"Getting Started","text":"Thresholds automatically remove colors low pixel proportions: Higher thresholds useful : Removing image artifacts (shadows, feather overlap bird specimens) Focusing dominant colors Reducing noise automated workflows","code":"# No threshold - keep all colors result_0 <- charisma(img_path, threshold = 0.0)  # 5% threshold - remove colors < 5% of image result_5 <- charisma(img_path, threshold = 0.05)  # 10% threshold - remove colors < 10% of image result_10 <- charisma(img_path, threshold = 0.10)"},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"saving-and-loading-results","dir":"Articles","previous_headings":"","what":"Saving and Loading Results","title":"Getting Started","text":"Save results reproducibility: creates: charisma_objects/: Timestamped .RDS files (full charisma object) diagnostic_plots/: Timestamped .PDF files (visualization) Load re-analyze saved objects:","code":"# Save with automatic timestamping out_dir <- file.path(\"~\", \"Documents\", \"charisma_outputs\")  result <- charisma(   img_path,   threshold = 0.05,   logdir = out_dir ) # Load saved object obj <- system.file(\"extdata\", \"Tangara_fastuosa.RDS\", package = \"charisma\") obj <- readRDS(obj)  # Re-analyze with different threshold result2 <- charisma2(   obj,   new.threshold = 0.10 )  # Revert to specific state result3 <- charisma2(   obj,   which.state = \"merge\",   state.index = 2 )"},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"extracting-color-data","dir":"Articles","previous_headings":"","what":"Extracting Color Data","title":"Getting Started","text":"charisma object contains classification data:","code":"# Get unique colors present unique_colors <- unique(result$classification)  # Get number of colors (k) k <- length(unique_colors)  # Get color proportions color_props <- result$color_mask_LUT_filtered  # Create presence/absence matrix summary <- summarize(result)"},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"custom-color-look-up-tables","dir":"Articles","previous_headings":"","what":"Custom Color Look-Up Tables","title":"Getting Started","text":"default CLUT covers 10 human-visible colors, can create custom CLUTs: CLUT validation tests every HSV coordinate ensure: gaps (every color maps category) overlaps (color maps exactly one category)","code":"# View default CLUT View(charisma::clut)  # Use custom CLUT my_clut <- charisma::clut  # Start with default  # ... modify HSV ranges ... result <- charisma(img_path, clut = my_clut)  # Validate custom CLUT (ensures complete HSV coverage) validation <- validate(clut = my_clut)"},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"integration-with-evolutionary-analyses","dir":"Articles","previous_headings":"","what":"Integration with Evolutionary Analyses","title":"Getting Started","text":"charisma output integrates seamlessly phylogenetic packages:","code":"# Process multiple species species_colors <- lapply(image_paths, function(img) {   result <- charisma(img, threshold = 0.05)   summarize(result) })  # Combine into data frame color_matrix <- do.call(rbind, species_colors)  # Use with geiger, phytools, pavo, etc. library(geiger) library(phytools)  # Fit evolutionary models fit_er <- fitDiscrete(   phylogeny,   color_matrix[, \"blue\"],   model = \"ER\" )  fit_ard <- fitDiscrete(   phylogeny,   color_matrix[, \"blue\"],   model = \"ARD\" )  # Reconstruct ancestral states ancestral <- ace(   color_matrix[, \"blue\"],   phylogeny,   type = \"discrete\" )"},{"path":[]},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"for-bird-museum-specimens","dir":"Articles","previous_headings":"Tips for Best Results","what":"For Bird Museum Specimens","title":"Getting Started","text":"Use manual mode remove feather artifact colors (brown/grey feather bases) Set threshold = 0.0 manually curate Remove bill, leg, tag pixels analysis","code":""},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"for-automated-workflows","dir":"Articles","previous_headings":"Tips for Best Results","what":"For Automated Workflows","title":"Getting Started","text":"Test different threshold values subset Use bins = 4 cutoff = 20 starting points Save intermediate results logdir","code":""},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"for-custom-image-sets","dir":"Articles","previous_headings":"Tips for Best Results","what":"For Custom Image Sets","title":"Getting Started","text":"Validate default CLUT works images Consider creating custom CLUT non-biological images Always validate custom CLUTs validate()","code":""},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"citation","dir":"Articles","previous_headings":"","what":"Citation","title":"Getting Started","text":"use charisma research, please cite: Schwartz, S.T., Tsai, W.L.E., Karan, E.., Juhn, M.S., Shultz, .J., McCormack, J.E., Smith, T.B., Alfaro, M.E. (2025). charisma: R package perform reproducible color characterization digital images biological studies. (Review).","code":""},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"getting-help","dir":"Articles","previous_headings":"","what":"Getting Help","title":"Getting Started","text":"Documentation: ?charisma, ?charisma2, ?color2label Issues: https://github.com/shawntz/charisma/issues Email: shawn.t.schwartz@gmail.com","code":""},{"path":"https://shawnschwartz.com/charisma/articles/charisma.html","id":"acknowledgments","dir":"Articles","previous_headings":"","what":"Acknowledgments","title":"Getting Started","text":"charisma builds upon integrates : recolorize (Weller et al.Â 2024) image preprocessing pavo (Maia et al.Â 2019) color pattern geometry imager (Barthelme, 2025) image processing operations thank developers excellent packages making work possible.","code":""},{"path":"https://shawnschwartz.com/charisma/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Shawn Schwartz. Author, maintainer, copyright holder. Whitney Tsai. Author. Elizabeth Karan. Author. Mark Juhn. Author. Allison Shultz. Author. John McCormack. Author. Thomas Smith. Author. Michael Alfaro. Author.","code":""},{"path":"https://shawnschwartz.com/charisma/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Schwartz S, Tsai W, Karan E, Juhn M, Shultz , McCormack J, Smith T, Alfaro M (2026). charisma: Reproducible Color Characterization Digital Images Biological Studies. R package version 1.0.0, https://github.com/shawntz/charisma.","code":"@Manual{,   title = {charisma: Reproducible Color Characterization of Digital Images for Biological Studies},   author = {Shawn Schwartz and Whitney Tsai and Elizabeth Karan and Mark Juhn and Allison Shultz and John McCormack and Thomas Smith and Michael Alfaro},   year = {2026},   note = {R package version 1.0.0},   url = {https://github.com/shawntz/charisma}, }"},{"path":"https://shawnschwartz.com/charisma/index.html","id":"charisma-","dir":"","previous_headings":"","what":"charisma â€¢ Reproducible Color Characterization","title":"charisma â€¢ Reproducible Color Characterization","text":"charisma provides standardized, reproducible framework characterizing discrete color classes digital images biological organisms.","code":""},{"path":"https://shawnschwartz.com/charisma/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"charisma â€¢ Reproducible Color Characterization","text":"charisma automatically classifies colors images 10 human-visible categories using biologically-inspired Color Look-Table (CLUT): Black Â· Blue Â· Brown Â· Green Â· Grey Â· Orange Â· Purple Â· Red Â· White Â· Yellow","code":""},{"path":"https://shawnschwartz.com/charisma/index.html","id":"key-features","dir":"","previous_headings":"Overview","what":"Key Features","title":"charisma â€¢ Reproducible Color Characterization","text":"âœ¨ Fully Reproducible: Complete provenance tracking operations ðŸŽ¨ 10 Color Classes: Biologically-relevant discrete color categories ðŸ”§ Flexible Workflows: fully automated completely manual ðŸ“Š Evolutionary Integration: Seamless compatibility geiger, phytools, pavo âš¡ High-Throughput: Designed analyzing large image datasets ðŸ” Validated CLUT: Non-overlapping HSV color space partitions","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/index.html","id":"system-dependencies","dir":"","previous_headings":"Installation","what":"System Dependencies","title":"charisma â€¢ Reproducible Color Characterization","text":"charisma depends spatial R packages require system-level libraries. Install first: macOS (via Homebrew): Ubuntu/Debian: Fedora/RedHat:","code":"brew install udunits gdal proj geos sudo apt-get install libudunits2-dev libgdal-dev libgeos-dev libproj-dev sudo dnf install udunits2-devel gdal-devel geos-devel proj-devel"},{"path":"https://shawnschwartz.com/charisma/index.html","id":"stable-version-cran","dir":"","previous_headings":"Installation","what":"Stable Version (CRAN)","title":"charisma â€¢ Reproducible Color Characterization","text":"","code":"install.packages(\"charisma\")"},{"path":"https://shawnschwartz.com/charisma/index.html","id":"development-version-github","dir":"","previous_headings":"Installation","what":"Development Version (GitHub)","title":"charisma â€¢ Reproducible Color Characterization","text":"","code":"# install.packages(\"remotes\") remotes::install_github(\"shawntz/charisma\")"},{"path":"https://shawnschwartz.com/charisma/index.html","id":"quick-start","dir":"","previous_headings":"","what":"Quick Start","title":"charisma â€¢ Reproducible Color Characterization","text":"","code":"library(charisma)  # Load example image img <- system.file(   \"extdata\",    \"Tangara_fastuosa_LACM60421.png\",   package = \"charisma\" )  # Basic analysis result <- charisma(img, threshold = 0.05)  # Visualize plot(result)  # Interactive mode with manual curation result_interactive <- charisma(   img,   interactive = TRUE,   threshold = 0.0 )  # Save outputs result_saved <- charisma(   img,   threshold = 0.05,   logdir = file.path(tempdir(), \"charisma_outputs\") )"},{"path":"https://shawnschwartz.com/charisma/index.html","id":"how-it-works","dir":"","previous_headings":"","what":"How It Works","title":"charisma â€¢ Reproducible Color Characterization","text":"charisma pipeline consists three stages:","code":""},{"path":"https://shawnschwartz.com/charisma/index.html","id":"id_1-image-preprocessing","dir":"","previous_headings":"How It Works","what":"1. Image Preprocessing","title":"charisma â€¢ Reproducible Color Characterization","text":"Uses recolorize perform spatial-color binning, removing noisy pixels creating smoothed representation dominant colors.","code":""},{"path":"https://shawnschwartz.com/charisma/index.html","id":"id_2-color-classification","dir":"","previous_headings":"How It Works","what":"2. Color Classification","title":"charisma â€¢ Reproducible Color Characterization","text":"Converts RGB cluster centers HSV matches CLUT using color2label():","code":"color2label(c(255, 0, 0))    # \"red\" color2label(c(0, 0, 255))    # \"blue\" color2label(c(255, 255, 0))  # \"yellow\""},{"path":"https://shawnschwartz.com/charisma/index.html","id":"id_3-optional-manual-curation","dir":"","previous_headings":"How It Works","what":"3. Optional Manual Curation","title":"charisma â€¢ Reproducible Color Characterization","text":"interactive mode: Merge color clusters (e.g., c(2,3)) Replace pixels clusters Full operation history maintained reproducibility charisma object contains: Color classifications: Discrete labels cluster Proportions: Pixel counts proportions per color Operation history: Complete log merges replacements Pavo statistics: Color pattern geometry metrics (optional)","code":""},{"path":[]},{"path":[]},{"path":"https://shawnschwartz.com/charisma/index.html","id":"re-analyze-saved-objects","dir":"","previous_headings":"Advanced Features","what":"Re-analyze Saved Objects","title":"charisma â€¢ Reproducible Color Characterization","text":"","code":"# Load previous analysis obj <- system.file(\"extdata\", \"Tangara_fastuosa.RDS\", package = \"charisma\") obj <- readRDS(obj)  # Apply different threshold result2 <- charisma2(   obj,    new.threshold = 0.10 )  # Revert to specific state result3 <- charisma2(   obj,    which.state = \"merge\",    state.index = 2 )"},{"path":"https://shawnschwartz.com/charisma/index.html","id":"custom-color-look-up-tables","dir":"","previous_headings":"Advanced Features","what":"Custom Color Look-Up Tables","title":"charisma â€¢ Reproducible Color Characterization","text":"Create customize CLUTs using interactive CLUT Editor: CLUT Editor provides: Visual editing HSV color space boundaries Real-time coverage statistics (gaps overlaps) Multiple visualization modes: hue slices, 3D cone, 3D scatter, hue wheel Export R code JSON designing CLUT, validate use :","code":"# Launch the CLUT Editor in your browser launch_clut_editor()  # Or use the local version bundled with the package launch_clut_editor(online = FALSE) # Create custom CLUT my_clut <- charisma::clut  # Start with default # ... modify HSV ranges ...  # Validate completeness validate(clut = my_clut)  # Use in analysis result <- charisma(img, clut = my_clut)"},{"path":"https://shawnschwartz.com/charisma/index.html","id":"evolutionary-analyses","dir":"","previous_headings":"Advanced Features","what":"Evolutionary Analyses","title":"charisma â€¢ Reproducible Color Characterization","text":"","code":"# Batch process images results <- lapply(image_paths, function(img) {   charisma(img, threshold = 0.05) })  # Extract color presence/absence color_matrix <- do.call(rbind, lapply(results, summarize))  # Phylogenetic analyses with geiger library(geiger)  fit_er <- fitDiscrete(   phylogeny,    color_matrix[, \"blue\"],    model = \"ER\" )  fit_ard <- fitDiscrete(   phylogeny,    color_matrix[, \"blue\"],    model = \"ARD\" )"},{"path":"https://shawnschwartz.com/charisma/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"charisma â€¢ Reproducible Color Characterization","text":"use charisma research, please cite: Schwartz, S.T., Tsai, W.L.E., Karan, E.., Juhn, M.S., Shultz, .J., McCormack, J.E., Smith, T.B., Alfaro, M.E. (2025). charisma: R package perform reproducible color characterization digital images biological studies. (Review).","code":""},{"path":"https://shawnschwartz.com/charisma/index.html","id":"getting-help","dir":"","previous_headings":"","what":"Getting Help","title":"charisma â€¢ Reproducible Color Characterization","text":"ðŸ“– Documentation ðŸ› Report Issues ðŸ“§ Email: shawn.t.schwartz@gmail.com","code":""},{"path":"https://shawnschwartz.com/charisma/index.html","id":"acknowledgments","dir":"","previous_headings":"","what":"Acknowledgments","title":"charisma â€¢ Reproducible Color Characterization","text":"charisma integrates : recolorize (Weller et al.Â 2024) - Image preprocessing pavo (Maia et al.Â 2019) - Color pattern geometry","code":""},{"path":"https://shawnschwartz.com/charisma/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"charisma â€¢ Reproducible Color Characterization","text":"MIT Â© 2025 Shawn T. Schwartz","code":""},{"path":"https://shawnschwartz.com/charisma/reference/charisma-package.html","id":null,"dir":"Reference","previous_headings":"","what":"charisma: Reproducible Color Characterization of Digital Images for Biological Studies â€” charisma-package","title":"charisma: Reproducible Color Characterization of Digital Images for Biological Studies â€” charisma-package","text":"Provides standardized reproducible framework characterizing classifying discrete color classes digital images biological organisms. package automatically determines presence absence 10 human-visible color categories (black, blue, brown, green, grey, orange, purple, red, white, yellow) using biologically-inspired Color Look-Table (CLUT) partitions HSV color space. Supports fully automated semi-automated (interactive) workflows complete provenance tracking reproducibility. Pre-processes images using 'recolorize' package (Weller et al. 2024 doi:10.1111/ele.14378 ) spatial-color binning, integrates 'pavo' (Maia et al. 2019 doi:10.1111/2041-210X.13174 ) color pattern geometry statistics. Designed high-throughput analysis seamless integration downstream evolutionary analyses.","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/reference/charisma-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"charisma: Reproducible Color Characterization of Digital Images for Biological Studies â€” charisma-package","text":"Maintainer: Shawn Schwartz shawn.t.schwartz@gmail.com (ORCID) [copyright holder] Authors: Whitney Tsai wtsai@nhm.org (ORCID) Elizabeth Karan (ORCID) Mark Juhn Allison Shultz ashultz@nhm.org (ORCID) John McCormack (ORCID) Thomas Smith (ORCID) Michael Alfaro michaelalfaro@g.ucla.edu (ORCID)","code":""},{"path":"https://shawnschwartz.com/charisma/reference/charisma.html","id":null,"dir":"Reference","previous_headings":"","what":"Characterize color classes in biological images â€” charisma","title":"Characterize color classes in biological images â€” charisma","text":"primary function charisma characterize distribution human-visible color classes present image. function provides standardized reproducible framework classifying colors discrete categories using biologically-inspired Color Look-Table (CLUT).","code":""},{"path":"https://shawnschwartz.com/charisma/reference/charisma.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Characterize color classes in biological images â€” charisma","text":"","code":"charisma(   img_path,   threshold = 0,   auto.drop = TRUE,   interactive = FALSE,   plot = FALSE,   pavo = TRUE,   logdir = NULL,   stack_colors = TRUE,   bins = 4,   cutoff = 20,   k.override = NULL,   clut = charisma::clut )"},{"path":"https://shawnschwartz.com/charisma/reference/charisma.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Characterize color classes in biological images â€” charisma","text":"img_path Character string specifying path image file, recolorize object (use charisma2). threshold Numeric value 0 1 specifying minimum proportion pixels required color retained. Colors proportions threshold automatically removed. Default 0.0 (retain colors). auto.drop Logical. TRUE, automatically removes background layer (layer 0) color counts. Default TRUE. interactive Logical. TRUE, enables manual intervention color merging replacement operations. Saves states full reproducibility. Default FALSE. plot Logical. TRUE, generates diagnostic plots processing. Default FALSE. pavo Logical. TRUE, computes color pattern geometry statistics using pavo package. Default TRUE. logdir Character string specifying directory path saving output files. provided, saves timestamped .RDS (charisma object) .PDF (diagnostic plots) files. Default NULL (files saved). stack_colors Logical. TRUE, stacks color proportions plots. Default TRUE. bins Integer specifying number bins RGB channel histogram method. Default 4 (resulting 4^3 = 64 cluster centers). cutoff Numeric value specifying Euclidean distance threshold combining similar color clusters. Default 20. k.override Integer force specific number color clusters, bypassing automatic detection. Default NULL. clut Data frame containing Color Look-Table HSV boundaries color class. Default charisma::clut (10 human-visible colors: black, blue, brown, green, grey, orange, purple, red, white, yellow).","code":""},{"path":"https://shawnschwartz.com/charisma/reference/charisma.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Characterize color classes in biological images â€” charisma","text":"charisma object (list) containing: centers RGB cluster centers pixel_assignments Pixel--cluster mapping classification Discrete color labels CLUT color_mask_LUT Mapping clusters averaged colors color_mask_LUT_filtered Color mapping threshold applied merge_history Record merge operations performed replacement_history Record replacement operations performed merge_states List charisma states merge replacement_states List charisma states replacement pavo_stats Color pattern geometry metrics (pavo = TRUE) prop_threshold Threshold value used path Path original image logdir Directory outputs saved auto_drop Value auto.drop parameter bins Value bins parameter cutoff Value cutoff parameter clut CLUT used classification stack_colors Value stack_colors parameter","code":""},{"path":"https://shawnschwartz.com/charisma/reference/charisma.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Characterize color classes in biological images â€” charisma","text":"charisma pipeline consists three main stages: Image preprocessing: Uses recolorize::recolorize2() perform spatial-color binning, removing noisy pixels creating smoothed representation dominant colors. Color classification: Converts RGB cluster centers HSV color space matches non-overlapping HSV ranges defined CLUT using charisma::color2label(). Optional manual curation: interactive mode, users can merge color clusters (e.g., c(2,3)) replace pixels clusters refine classifications. workflow can run fully autonomously varying degrees manual intervention. operations logged complete reproducibility.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/charisma.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Characterize color classes in biological images â€” charisma","text":"Schwartz, S.T., Tsai, W.L.E., Karan, E.., Juhn, M.S., Shultz, .J., McCormack, J.E., Smith, T.B., Alfaro, M.E. (2025). charisma: R package perform reproducible color characterization digital images biological studies. (Review). Weller, H.., Hiller, .E., Lord, N.P., Van Belleghem, S.M. (2024). recolorize: R package flexible colour segmentation biological images. Ecology Letters, 27(2):e14378.","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/reference/charisma.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Characterize color classes in biological images â€” charisma","text":"","code":"# \\donttest{ # Basic usage with example image img <- system.file(\"extdata\", \"Tangara_fastuosa_LACM60421.png\",                    package = \"charisma\") result <- charisma(img) #> Warning: if any are empty, remove them #> Discrete color classes identified: k=7 #> (black, blue, brown, green, grey, orange, yellow) #> Warning: no DISPLAY variable so Tk is not available #> Image classification in progress... #> Using single set of coldists for all images. #>   # With threshold to remove minor colors result <- charisma(img, threshold = 0.05) #> Warning: if any are empty, remove them #>  #> 3 classes were dropped based on your threshold of 0.05. #>  #> Replacement colors for these dropped classes arebeing automatically selected based on the pairwiseEuclidean distances between colors classes in the RGBspace so that `pavo` will receive a complete imagemask for downstream calculations! #>  #> >> The following color categories will be used for remapping: #>  - black #>  - blue #>  - green #>  - grey #>   #> Distances between brown and: #>   * grey => 61.33 #>   * green => 76.13 #>   * blue => 121.37 #>   * black => 137.26 #> ...Replacing brown with grey #> Distances between orange and: #>   * grey => 131.23 #>   * green => 144.35 #>   * blue => 190.4 #>   * black => 221.06 #> ...Replacing orange with grey #> Distances between yellow and: #>   * green => 168.25 #>   * grey => 170.78 #>   * blue => 231.46 #>   * black => 239.13 #> ...Replacing yellow with green #>   #> Discrete color classes identified: k=4 #> (black, blue, green, grey) #> Image classification in progress... #> Using single set of coldists for all images. #>   # Save outputs to directory out_dir <- file.path(tempdir(), \"charisma_outputs\") result <- charisma(img, threshold = 0.05, logdir = out_dir) #> Warning: if any are empty, remove them #>  #> 3 classes were dropped based on your threshold of 0.05. #>  #> Replacement colors for these dropped classes arebeing automatically selected based on the pairwiseEuclidean distances between colors classes in the RGBspace so that `pavo` will receive a complete imagemask for downstream calculations! #>  #> >> The following color categories will be used for remapping: #>  - black #>  - blue #>  - green #>  - grey #>   #> Distances between brown and: #>   * grey => 61.33 #>   * green => 76.13 #>   * blue => 121.36 #>   * black => 137.28 #> ...Replacing brown with grey #> Distances between orange and: #>   * grey => 131.23 #>   * green => 144.35 #>   * blue => 190.4 #>   * black => 221.06 #> ...Replacing orange with grey #> Distances between yellow and: #>   * green => 168.25 #>   * grey => 170.78 #>   * blue => 231.47 #>   * black => 239.13 #> ...Replacing yellow with green #>   #> Discrete color classes identified: k=4 #> (black, blue, green, grey) #> Image classification in progress... #> Using single set of coldists for all images. #>  #> Writing out charisma object to: /tmp/RtmpTREzT2/charisma_outputs/charisma_objects/Tangara_fastuosa_LACM60421_charisma_02-01-2026_00.46.18.RDS #> Writing out charisma plot to: /tmp/RtmpTREzT2/charisma_outputs/diagnostic_plots/Tangara_fastuosa_LACM60421_charisma_02-01-2026_00.46.18.pdf  # View results plot(result)  #> Error in par(oldpar): invalid value specified for graphical parameter \"pin\" # }  # Interactive mode with manual curation (only runs in interactive sessions) if (interactive()) {   img <- system.file(\"extdata\", \"Tangara_fastuosa_LACM60421.png\",                      package = \"charisma\")   result <- charisma(img, interactive = TRUE, threshold = 0.0) }"},{"path":"https://shawnschwartz.com/charisma/reference/charisma2.html","id":null,"dir":"Reference","previous_headings":"","what":"Re-analyze and edit saved charisma objects â€” charisma2","title":"Re-analyze and edit saved charisma objects â€” charisma2","text":"charisma2 function allows users step edit previously saved charisma objects. function enables rewinding specific merge replacement states, applying different thresholds, continuing interactive editing saved state, ensuring full reproducibility analysis.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/charisma2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Re-analyze and edit saved charisma objects â€” charisma2","text":"","code":"charisma2(   charisma.obj,   interactive = TRUE,   new.threshold = NULL,   which.state = c(\"none\", \"merge\", \"replace\"),   state.index = NULL,   k.override = NULL )"},{"path":"https://shawnschwartz.com/charisma/reference/charisma2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Re-analyze and edit saved charisma objects â€” charisma2","text":"charisma.obj charisma object re-analyzed. charisma2 object (attempting run charisma2 charisma2 object produce error). interactive Logical. TRUE, enters interactive mode manual color adjustments. Default TRUE. new.threshold Numeric value 0 1 apply different color proportion threshold original analysis. NULL, uses original threshold. Default NULL. .state Character string specifying state revert . Options \"none\" (recent state), \"merge\" (specific merge state), \"replace\" (specific replacement state). Default \"none\". state.index Integer specifying state index revert .state \"merge\" \"replace\". Must provided .state \"none\". Default NULL. k.override Integer force specific number color clusters. Default NULL.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/charisma2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Re-analyze and edit saved charisma objects â€” charisma2","text":"charisma2 object (also class charisma) containing structure charisma object, updated states based specified reversion point new operations performed.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/charisma2.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Re-analyze and edit saved charisma objects â€” charisma2","text":"charisma2 function provides powerful state management capabilities: State rewinding: Jump previous merge replacement state Re-thresholding: Apply different color proportion thresholds without re-running entire pipeline Continued editing: Resume interactive editing saved states Full provenance: operations maintain complete history reproducibility Note: Interactive adjustment merge states disabled replacement states exist, replacement operations depend post-merge cluster indices.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/charisma2.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Re-analyze and edit saved charisma objects â€” charisma2","text":"Schwartz, S.T., Tsai, W.L.E., Karan, E.., Juhn, M.S., Shultz, .J., McCormack, J.E., Smith, T.B., Alfaro, M.E. (2025). charisma: R package perform reproducible color characterization digital images biological studies. (Review).","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/reference/charisma2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Re-analyze and edit saved charisma objects â€” charisma2","text":"","code":"# Load a previously saved charisma object obj <- system.file(\"extdata\", \"Tangara_fastuosa.RDS\", package = \"charisma\") obj <- readRDS(obj)  if (FALSE) { # \\dontrun{ # Examples that require objects with merge/replacement states # (These examples show the syntax but won't run with the provided test data)  # Revert to a specific merge state (if merge states exist) if (length(obj$merge_states) >= 2) {   result <- charisma2(obj, which.state = \"merge\", state.index = 2) }  # Revert to a specific replacement state (if replacement states exist) if (length(obj$replacement_states) >= 1) {   result <- charisma2(obj, which.state = \"replace\", state.index = 1) }  # Re-enter interactive mode with original threshold obj <- system.file(\"extdata\", \"Tangara_fastuosa.RDS\", package = \"charisma\") obj <- readRDS(obj) result <- charisma2(obj, interactive = TRUE) } # }"},{"path":"https://shawnschwartz.com/charisma/reference/clut.html","id":null,"dir":"Reference","previous_headings":"","what":"Default Color (Labels) Look Up Table (CLUT) â€” clut","title":"Default Color (Labels) Look Up Table (CLUT) â€” clut","text":"LUT contains color boundaries cut continuous HSV color space 10 discrete color labels (.e., black, white, grey, brown, red, orange, yellow, green, blue, purple).","code":""},{"path":"https://shawnschwartz.com/charisma/reference/clut.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default Color (Labels) Look Up Table (CLUT) â€” clut","text":"","code":"clut"},{"path":"https://shawnschwartz.com/charisma/reference/clut.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Default Color (Labels) Look Up Table (CLUT) â€” clut","text":"data frame color boundary definitions HSV color space. row defines HSV ranges specific discrete color category.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/clut.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Default Color (Labels) Look Up Table (CLUT) â€” clut","text":"color boundaries determined forming consensus across three experts biology color. Color boundaries intentionally tuned reflect accurate color label classifications images various bird fish museum specimens. Although attempted determine color boundaries object fashion, course perceptual biases variability across computer models/ displays can influence whether given color boundary continuous color space ultimately called one color another. Accordingly, gladly welcome optimization default color LUT /submissions color LUTS specifically tuned given organism stimulus. Leveraging contributions community help charisma useful everybody like use !","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/reference/clut.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Default Color (Labels) Look Up Table (CLUT) â€” clut","text":"","code":"# View the default CLUT head(clut) #>   color.name default.hex #> 1      black     #000000 #> 2      white     #FFFFFF #> 3       grey     #808080 #> 4      brown     #964B00 #> 5        red     #FF0000 #> 6     orange     #FFA500 #>                                                           h #> 1                                                    0::360 #> 2                                                    0::360 #> 3                               0::360,0::360,0::360,0::360 #> 4 0::54|320::360,0::54|300::360,16::54,20::40,20::40,36::40 #> 5              0::15|300::360,0::19|300::360,0::19|300::360 #> 6                        20::40,20::35,20::35,36::40,36::40 #>                                              s #> 1                                       0::100 #> 2                                        0::19 #> 3                      0::25,0::19,0::19,0::15 #> 4 26::100,20::100,20::100,16::80,20::80,20::50 #> 5                      20::100,16::100,20::100 #> 6         81::100,20::80,81::100,20::50,51::80 #>                                           v #> 1                                     0::30 #> 2                                   82::100 #> 3               31::40,41::60,61::75,76::81 #> 4 31::40,41::60,61::75,76::81,82::84,85::90 #> 5                     61::75,76::81,82::100 #> 6    76::85,85::100,82::100,91::100,85::100"},{"path":"https://shawnschwartz.com/charisma/reference/color2label.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert RGB color triplets to discrete color labels â€” color2label","title":"Convert RGB color triplets to discrete color labels â€” color2label","text":"function classifies RGB color triplet one discrete color categories defined Color Look-Table (CLUT) testing membership within non-overlapping HSV ranges.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/color2label.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert RGB color triplets to discrete color labels â€” color2label","text":"","code":"color2label(color_triplet, verbose = FALSE, clut = charisma::clut)"},{"path":"https://shawnschwartz.com/charisma/reference/color2label.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert RGB color triplets to discrete color labels â€” color2label","text":"color_triplet Numeric vector length 3 containing RGB values (0-255 scale). vector c(red, green, blue). verbose Logical. TRUE, prints color triplet classification results debugging. Default FALSE. clut Data frame containing Color Look-Table HSV boundaries color class. Default charisma::clut.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/color2label.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert RGB color triplets to discrete color labels â€” color2label","text":"Character string indicating matched color label CLUT. Returns \"NA\" input contains NA values.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/color2label.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert RGB color triplets to discrete color labels â€” color2label","text":"classification process involves: Converting RGB HSV (using rgb2hsv) Scaling HSV match CLUT ranges (H: 0-360, S: 0-100, V: 0-100) Testing HSV coordinate color definitions CLUT Returning single matching color label color CLUT non-overlapping HSV ranges partition entire HSV color space. multiple matches occur, warning issued indicates overlapping color boundaries CLUT.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/color2label.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Convert RGB color triplets to discrete color labels â€” color2label","text":"Schwartz, S.T., Tsai, W.L.E., Karan, E.., Juhn, M.S., Shultz, .J., McCormack, J.E., Smith, T.B., Alfaro, M.E. (2025). charisma: R package perform reproducible color characterization digital images biological studies. (Review).","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/reference/color2label.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert RGB color triplets to discrete color labels â€” color2label","text":"","code":"# Classify a blue RGB color color2label(c(0, 0, 255)) #> [1] \"blue\"  # Classify a red RGB color color2label(c(255, 0, 0)) #> [1] \"red\"  # Verbose output for debugging color2label(c(128, 128, 128), verbose = TRUE) #>   h s         v #> 1 0 0 0.5019608 #>  black  white   grey  brown    red orange yellow  green   blue purple  #>      0      0      1      0      0      0      0      0      0      0  #> [1] \"grey\""},{"path":"https://shawnschwartz.com/charisma/reference/labelCol.html","id":null,"dir":"Reference","previous_headings":"","what":"Change colors of dendrogram tips â€” labelCol","title":"Change colors of dendrogram tips â€” labelCol","text":"Internal function recolorize::recluster plotting.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/labelCol.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Change colors of dendrogram tips â€” labelCol","text":"","code":"labelCol(x, hex_cols, pch = 20, cex = 2)"},{"path":"https://shawnschwartz.com/charisma/reference/labelCol.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Change colors of dendrogram tips â€” labelCol","text":"x Leaf dendrogram. hex_cols Hex color codes colors change . pch type point draw. cex size point.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/labelCol.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Change colors of dendrogram tips â€” labelCol","text":"hclust object colored tips.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/launch_clut_editor.html","id":null,"dir":"Reference","previous_headings":"","what":"Launch the CLUT Editor â€” launch_clut_editor","title":"Launch the CLUT Editor â€” launch_clut_editor","text":"Opens interactive Color Lookup Table (CLUT) Editor web browser. CLUT Editor allows visually design customize HSV color space partitions color classification, 3D visualizations coverage statistics.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/launch_clut_editor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Launch the CLUT Editor â€” launch_clut_editor","text":"","code":"launch_clut_editor(online = TRUE)"},{"path":"https://shawnschwartz.com/charisma/reference/launch_clut_editor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Launch the CLUT Editor â€” launch_clut_editor","text":"online Logical. TRUE (default), opens hosted version https://charisma.shawnschwartz.com/app. FALSE, opens local version bundled package.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/launch_clut_editor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Launch the CLUT Editor â€” launch_clut_editor","text":"Invisibly returns URL opened. Called primarily side effect opening CLUT Editor default web browser.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/launch_clut_editor.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Launch the CLUT Editor â€” launch_clut_editor","text":"CLUT Editor provides: Visual editing HSV color space boundaries color category Real-time coverage statistics showing gaps overlaps Multiple visualization modes: hue slices, 3D cone, 3D scatter, hue wheel Export R code JSON use charisma() Import/export functionality sharing custom CLUTs Custom CLUTs created editor can validated using validate() used charisma() analyses via clut parameter.","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/reference/launch_clut_editor.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Launch the CLUT Editor â€” launch_clut_editor","text":"","code":"if (FALSE) { # \\dontrun{ # Open the online CLUT Editor (recommended) launch_clut_editor()  # Open the local version bundled with the package launch_clut_editor(online = FALSE) } # }"},{"path":"https://shawnschwartz.com/charisma/reference/mosaic.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a color mosaic visualization from color proportions â€” mosaic","title":"Create a color mosaic visualization from color proportions â€” mosaic","text":"function generates randomized mosaic grid visualization representing proportions different colors, useful visually displaying color composition standardized format.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/mosaic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a color mosaic visualization from color proportions â€” mosaic","text":"","code":"mosaic(   color.props,   size = 10,   out.path = normalizePath(\"~\"),   out.prefix = \"charisma_mosaic\",   verbose = TRUE )"},{"path":"https://shawnschwartz.com/charisma/reference/mosaic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a color mosaic visualization from color proportions â€” mosaic","text":"color.props List color proportion objects, element contains: hex: Hex color code (e.g., \"#FF0000\") color: Color name prop: Proportion value (proportions must sum 1) size Integer specifying dimensions mosaic grid (size x size). Default 10 (resulting 10 x 10 = 100 cell mosaic). .path Character string specifying directory path saving output PNG file. Default user's home directory. .prefix Character string prefix output filename. Default \"charisma_mosaic\". verbose Logical. TRUE, prints full output path. Default TRUE.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/mosaic.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a color mosaic visualization from color proportions â€” mosaic","text":"Character string containing full path saved PNG file.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/mosaic.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a color mosaic visualization from color proportions â€” mosaic","text":"mosaic function creates visual representation color proportions : Allocating grid cells proportional color's proportion Randomly shuffling cell positions create mosaic pattern Saving result PNG file informative filename output filename automatically encodes hex codes, color names, proportions documentation purposes.","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/reference/mosaic.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a color mosaic visualization from color proportions â€” mosaic","text":"","code":"# Create a mosaic from color proportions colors <- list(   list(hex = \"#FF0000\", color = \"red\", prop = 0.4),   list(hex = \"#00FF00\", color = \"green\", prop = 0.3),   list(hex = \"#0000FF\", color = \"blue\", prop = 0.3) ) mosaic(colors, size = 10, out.path = tempdir()) #> /tmp/RtmpTREzT2/charisma_mosaic_hex-FF0000_color-red_prop-0.4_hex-00FF00_color-green_prop-0.3_hex-0000FF_color-blue_prop-0.3.png #> [1] \"/tmp/RtmpTREzT2/charisma_mosaic_hex-FF0000_color-red_prop-0.4_hex-00FF00_color-green_prop-0.3_hex-0000FF_color-blue_prop-0.3.png\""},{"path":"https://shawnschwartz.com/charisma/reference/plot.charisma.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot method for charisma objects â€” plot.charisma","title":"Plot method for charisma objects â€” plot.charisma","text":"function creates visualizations color classification results charisma analysis. can display original image, recolored image, masked image, color proportions, pavo color pattern geometry results.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/plot.charisma.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot method for charisma objects â€” plot.charisma","text":"","code":"# S3 method for class 'charisma' plot(   x,   plot.all = TRUE,   plot.original = FALSE,   plot.recolored = FALSE,   plot.masked = FALSE,   plot.props = FALSE,   plot.pavo.img = FALSE,   plot.pavo.classes = FALSE,   font.size = 1.75,   props.x.cex = 1.5,   real.bar.colors = TRUE,   ... )"},{"path":"https://shawnschwartz.com/charisma/reference/plot.charisma.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot method for charisma objects â€” plot.charisma","text":"x charisma object (output charisma charisma2). plot.Logical. TRUE, plots available visualizations. Default TRUE. plot.original Logical. TRUE, plots original image. Default FALSE. plot.recolored Logical. TRUE, plots recolored image showing discrete color classifications. Default FALSE. plot.masked Logical. TRUE, plots masked image background removal. Default FALSE. plot.props Logical. TRUE, plots bar chart showing proportion pixels color category. Default FALSE. plot.pavo.img Logical. TRUE, plots image used pavo color pattern geometry analysis. Default FALSE. available pavo analysis performed. plot.pavo.classes Logical. TRUE, plots color palette pavo k-means clustering. Default FALSE. available pavo analysis performed. font.size Numeric. Size multiplier plot text elements. Default 1.75. props.x.cex Numeric. Size multiplier x-axis labels proportions plot. Default 1.5. real.bar.colors Logical. TRUE, uses actual color values bars proportions plot. FALSE, uses default color scheme. Default TRUE. ... Additional arguments (currently used).","code":""},{"path":"https://shawnschwartz.com/charisma/reference/plot.charisma.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot method for charisma objects â€” plot.charisma","text":"function called side effects (creating plots) return value.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/plot.charisma.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot method for charisma objects â€” plot.charisma","text":"plot.= TRUE, available plots displayed multi-panel layout. Individual plots can selected setting corresponding plot.* parameters TRUE. function automatically detects whether pavo analysis results present charisma object adjusts plot layout accordingly.","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/reference/plot.charisma.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot method for charisma objects â€” plot.charisma","text":"","code":"# \\donttest{ # Run charisma on an image img <- system.file(\"extdata\", \"Tangara_fastuosa_LACM60421.png\",                    package = \"charisma\") result <- charisma(img) #> Warning: if any are empty, remove them #> Discrete color classes identified: k=7 #> (black, blue, brown, green, grey, orange, yellow) #> Image classification in progress... #> Using single set of coldists for all images. #>   # Plot all results plot(result)  #> Error in par(oldpar): invalid value specified for graphical parameter \"pin\"  # Plot only original and recolored images plot(result, plot.all = FALSE, plot.original = TRUE, plot.recolored = TRUE)   # Plot color proportions plot(result, plot.all = FALSE, plot.props = TRUE)  # }"},{"path":"https://shawnschwartz.com/charisma/reference/summarize.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarize color classification results â€” summarize","title":"Summarize color classification results â€” summarize","text":"function takes charisma object produces summary table showing proportion pixels classified discrete color category.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/summarize.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarize color classification results â€” summarize","text":"","code":"summarize(charisma_obj)  summarise(charisma_obj)"},{"path":"https://shawnschwartz.com/charisma/reference/summarize.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarize color classification results â€” summarize","text":"charisma_obj charisma object (output charisma charisma2) containing color classification results.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/summarize.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarize color classification results â€” summarize","text":"data frame one row per image showing proportion pixels assigned color category. Row names set basename image file path.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/summarize.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Summarize color classification results â€” summarize","text":"summary table shows percentage pixels classified discrete color categories defined Color Look-Table (CLUT). provides quantitative overview color composition analyzed image.","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/reference/summarize.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarize color classification results â€” summarize","text":"","code":"# \\donttest{ # Run charisma on an image img <- system.file(\"extdata\", \"Tangara_fastuosa_LACM60421.png\",                    package = \"charisma\") result <- charisma(img) #> Warning: if any are empty, remove them #> Discrete color classes identified: k=7 #> (black, blue, brown, green, grey, orange, yellow) #> Image classification in progress... #> Using single set of coldists for all images. #>   # Summarize the color classification results summary_table <- summarize(result) print(summary_table) #>                                black white grey brown red orange yellow green #> Tangara_fastuosa_LACM60421.png     1     0    1     1   0      1      1     1 #>                                blue purple k #> Tangara_fastuosa_LACM60421.png    1      0 7 # }"},{"path":"https://shawnschwartz.com/charisma/reference/validate.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate Color Look-Up Table completeness â€” validate","title":"Validate Color Look-Up Table completeness â€” validate","text":"function validates Color Look-Table (CLUT) provides complete non-overlapping coverage HSV color space testing every HSV coordinate CLUT definitions. Validation ensures color maps exactly one color class.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/validate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate Color Look-Up Table completeness â€” validate","text":"","code":"validate(clut = charisma::clut, simple = TRUE)"},{"path":"https://shawnschwartz.com/charisma/reference/validate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate Color Look-Up Table completeness â€” validate","text":"clut Data frame containing Color Look-Table HSV boundaries color class. Default charisma::clut. simple Logical. TRUE (default), tests reduced HSV space 1-degree increments (361 x 101 x 101 = 3,682,561 coordinates). FALSE, uses finer 0.5-degree increments, thorough significantly slower best suited cluster computing.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/validate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate Color Look-Up Table completeness â€” validate","text":"validation passes, returns 0 prints success message. validation fails, returns data frame containing HSV coordinates either: (1) classified color, (2) classified multiple colors (indicating overlap).","code":""},{"path":"https://shawnschwartz.com/charisma/reference/validate.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Validate Color Look-Up Table completeness â€” validate","text":"validation process: Generates complete grid HSV color space coordinates Uses parallel processing (available cores - 1) classify coordinate using CLUT definitions Checks coordinate maps exactly one color class Reports missing duplicate classifications Validation essential modifying CLUT creating custom CLUTs different image datasets. process can take several minutes even simple = TRUE.","code":""},{"path":"https://shawnschwartz.com/charisma/reference/validate.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Validate Color Look-Up Table completeness â€” validate","text":"Schwartz, S.T., Tsai, W.L.E., Karan, E.., Juhn, M.S., Shultz, .J., McCormack, J.E., Smith, T.B., Alfaro, M.E. (2025). charisma: R package perform reproducible color characterization digital images biological studies. (Review).","code":""},{"path":[]},{"path":"https://shawnschwartz.com/charisma/reference/validate.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Validate Color Look-Up Table completeness â€” validate","text":"","code":"if (FALSE) { # \\dontrun{ # Validate the default CLUT (takes several minutes with parallel processing)  # Note: These examples are not run during R CMD check due to CRAN build # limitations. With only 2 cores available during CRAN checks, validation # can exceed 20 minutes.  result <- validate()  # Validate a custom CLUT my_clut <- charisma::clut  # Start with default # ... modify my_clut ... result <- validate(clut = my_clut)  # More thorough validation (much slower, recommended for cluster computing) result <- validate(simple = FALSE) } # }"},{"path":"https://shawnschwartz.com/charisma/news/index.html","id":"charisma-100","dir":"Changelog","previous_headings":"","what":"charisma 1.0.0","title":"charisma 1.0.0","text":"CRAN release: 2025-12-08","code":""},{"path":"https://shawnschwartz.com/charisma/news/index.html","id":"initial-cran-release-1-0-0","dir":"Changelog","previous_headings":"","what":"Initial CRAN Release","title":"charisma 1.0.0","text":"First public release charisma - R package reproducible color characterization digital images biological studies (things).","code":""},{"path":"https://shawnschwartz.com/charisma/news/index.html","id":"features-1-0-0","dir":"Changelog","previous_headings":"Initial CRAN Release","what":"Features","title":"charisma 1.0.0","text":"Automatic Color Classification: Classify image colors one 10 discrete, biologically-inspired categories (black, blue, brown, green, grey, orange, purple, red, white, yellow) CLUT System: Color Look-Table (CLUT) scientifically-defined HSV boundaries color category, validated across 3.6+ million color coordinates Main Functions: charisma(): Main color classification pipeline automatic thresholding charisma2(): Rewind edit saved charisma objects without re-running full pipeline color2label(): Convert individual RGB/HSV colors discrete labels validate(): Validate CLUT completeness across color space Integration: Leverages recolorize image preprocessing color segmentation Optional pavo integration color pattern geometry analysis Supports interactive automated workflows Reproducibility: Complete state tracking merge/replacement history Save reload analyses full provenance Deterministic color classification cross-study comparisons Visualization: Plot methods charisma objects Mosaic plots showing color proportions Color masks classification overlays","code":""},{"path":"https://shawnschwartz.com/charisma/news/index.html","id":"documentation-1-0-0","dir":"Changelog","previous_headings":"Initial CRAN Release","what":"Documentation","title":"charisma 1.0.0","text":"Comprehensive vignette step--step tutorial Example data bird (Tangara fastuosa) Tips museum specimens automated workflows pkgdown website full documentation","code":""},{"path":"https://shawnschwartz.com/charisma/news/index.html","id":"testing-1-0-0","dir":"Changelog","previous_headings":"Initial CRAN Release","what":"Testing","title":"charisma 1.0.0","text":"Unit tests covering main functions Example workflows validated published results CLUT validation across full HSV color space","code":""}]
